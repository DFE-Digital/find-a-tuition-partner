@page
@model EnquirerEmail
@using GovUk.Frontend.AspNetCore.TagHelpers
@{
    var backLink = Model.Data.From == ReferrerList.CheckYourAnswers ? "/enquiry/build/check-your-answers" : $"/enquiry/build/guidance?{Model.Data.ToQueryString()}";
    ViewData["Title"] = "What is your email address?";
    ViewData["BackLinkHref"] = backLink;
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <form method="get">
            <h1 class="govuk-heading-l">What is your email address?</h1>
            <div class="govuk-form-group">
                <div asp-validation-group-for="Data.Email" data-testid="enquirer-email">
                    <govuk-input asp-for="Data.Email" input-class="govuk-input govuk-!-width-three-quarters" autocomplete="email" data-testid="enquirer-email-input-box" type="email" spellcheck="false" autocomplete="email">
                        <govuk-input-label>Email address</govuk-input-label>
                        <govuk-input-hint>Tuition partners won’t see your email address until you agree to share it.  We’ll use this email to notify you if you get a response from a tuition partner.</govuk-input-hint>
                    </govuk-input>
                </div>
            </div>
            @if (Model.Data.KeyStages != null)
            {
                @for (int i = 0; i < Model.Data.KeyStages.Count(); i++)
                {
                    <input asp-for="Data.KeyStages![i]" type="hidden"/>
                }
            }
            @if (Model.Data!.Subjects != null)
            {
                @for (int i = 0; i < Model.Data.Subjects.Count(); i++)
                {
                    <input asp-for="Data.Subjects![i]" type="hidden"/>
                }
            }
            <input asp-for="Data.Postcode" type="hidden" />
            <input asp-for="Data.From" type="hidden" />
            <input type="hidden" name="handler" value="Submit"/>
            <div class="govuk-button-group">
                <govuk-button prevent-double-click="true" type="submit" data-testid="call-to-action">Continue</govuk-button>
            </div>
        </form>
    </div>
</div>